<!DOCTYPE HTML>
<html>
<head>
	<title>JS Maze</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #b2cac9;
		}

		#help{
			position: absolute;
			z-index: 20;
			color: black;
			top: 20px;
			left: 120px;
		}
	</style>

	<script src="test.js"></script>

	<script src="pixi.js"></script>
</head>
<body>
	<script>


	// create an new instance of a pixi stage
	// the second parameter is interactivity...
	var interactive = true;
	var stage = new PIXI.Stage(0xb2cac9, interactive);

	// create a renderer instance.
	var renderer = PIXI.autoDetectRenderer(195, 195);
	

	var grid=new Array(11);
	for(var i=0;i<11;i++){
		grid[i]=new Array(11);
		for(var j=0;j<11;j++){
			grid[i][j]=1;
		}

	}
	maze=generateMaze(11,11);
	grid=returnFrame2(5,5,11,11,maze);

	console.log(grid.toString());

	var block1Texture=PIXI.Texture.fromImage("block1.png");
	var block2Texture=PIXI.Texture.fromImage("block2.png");
	var empty3Texture=PIXI.Texture.fromImage("block3.png");
	var empty4Texture=PIXI.Texture.fromImage("block4.png");
	var empty5Texture=PIXI.Texture.fromImage("block5.png");
	var charTexture;
	var bg;
	var blockSize=15;
	
	function GridBlock(x,y)
    {
        this.Disp = new PIXI.Sprite(emptyTexture);
        this.Disp.anchor.x = 0;
        this.Disp.anchor.y = 0;
        this.Disp.position.x = x*blockSize+blockSize;
        this.Disp.position.y = y*blockSize+blockSize;

    }
	//function moveBlock(x,y);
	function ParseMazeData(mazeData){
		var mazeGrids=new Array(11);
		for(var i=0;i<11;i++){
			mazeGrids[i]=new Array(11);

		}
		for(var i=0;i<11;i++){
			for(var j=0;j<11;j++){
				var g= new GridBlock(i,j);
				if(mazeData[i][j]==0){
					
				}else{
					g.Disp.setTexture(blockTexture);
				}
				mazeGrids[i][j]=g;
			}
		}
		return mazeGrids;
	}
	function MazeSetup(mazegrid){
		console.log(mazegrid);
		for(var i=0;i<11;i++){
			for(var j=0;j<11;j++){
				stage.addChild(mazegrid[i][j].Disp);
				//console.log(mazegrid[i][j].Disp.position.x)
			}
		}
	}



	MazeSetup(ParseMazeData(grid));
	// create a background..
	var background = PIXI.Sprite.fromImage("frame.png");

	// add background to stage..
	stage.addChild(background);


	// add the renderer view element to the DOM
	document.body.appendChild(renderer.view);

	requestAnimFrame( animate );

	/*

	// create a background..
	var background = PIXI.Sprite.fromImage("button_test_BG.jpg");

	// add background to stage..
	stage.addChild(background);

	// create some textures from an image path
	var textureButton = PIXI.Texture.fromImage("button.png");
	var textureButtonDown = PIXI.Texture.fromImage("buttonDown.png");
	var textureButtonOver = PIXI.Texture.fromImage("buttonOver.png");

	var buttons = [];

	var buttonPositions = [175,75,
						   600-145, 75,
						   600/2 - 20, 400/2 + 10,
						   175, 400-75,
						   600-115, 400-95];




	for (var i=0; i < 5; i++)
	{
		var button = new PIXI.Sprite(textureButton);
		button.buttonMode = true;

		button.anchor.x = 0.5;
		button.anchor.y = 0.5;

		button.position.x = buttonPositions[i*2];
		button.position.y = buttonPositions[i*2 + 1];

		// make the button interactive..
		button.interactive = true;

		// set the mousedown and touchstart callback..
		button.mousedown = button.touchstart = function(data){

			this.isdown = true;
			this.setTexture(textureButtonDown);
			this.alpha = 1;
		}

		// set the mouseup and touchend callback..
		button.mouseup = button.touchend = button.mouseupoutside = button.touchendoutside = function(data){
			this.isdown = false;

			if(this.isOver)
			{
				this.setTexture(textureButtonOver);
			}
			else
			{
				this.setTexture(textureButton);
			}
		}

		// set the mouseover callback..
		button.mouseover = function(data){

			this.isOver = true;

			if(this.isdown)return

			this.setTexture(textureButtonOver)
		}

		// set the mouseout callback..
		button.mouseout = function(data){

			this.isOver = false;
			if(this.isdown)return
			this.setTexture(textureButton)
		}

		button.click = function(data){
			// click!
			console.log("CLICK!");
		//	alert("CLICK!")
		}

		button.tap = function(data){
			// click!
			console.log("TAP!!");
			//this.alpha = 0.5;
		}

		// add it to the stage
		stage.addChild(button);

		// add button to array
		buttons.push(button);
	};

	// set some silly values..

	//buttons[0].scale.x = 1.2;

	//buttons[1].scale.y = 1.2;

	//buttons[2].rotation = Math.PI/10;

	//buttons[3].scale.x = 0.8;
	//buttons[3].scale.y = 0.8;

	//buttons[4].scale.x = 0.8;
	//buttons[4].scale.y = 1.2;
	//buttons[4].rotation = Math.PI;
	// var button1 =
	*/
	var speed=10;
	function move(){}
	function animate() {

	    requestAnimFrame( animate );
	    // render the stage

	    // do a test..

	    renderer.render(stage);
	}

	// add a logo!
	//var pixiLogo = PIXI.Sprite.fromImage("pixi.png");
	//stage.addChild(pixiLogo);

	//pixiLogo.position.x = 620 - 56;
	//pixiLogo.position.y = 400- 32;

	//pixiLogo.setInteractive(true);

	//pixiLogo.click = pixiLogo.tap = function(){

	//	var win=window.open("https://github.com/GoodBoyDigital/pixi.js", '_blank');

	
	</script>

	</body>
</html>
